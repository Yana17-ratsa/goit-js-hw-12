{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nexport async function getImages(query) {\n        const BASE_URL = 'https://pixabay.com/api/';\n        const params = new URLSearchParams ({\n            key: '43111916-8a66f764b7b1580d41f140627',\n            q: query,\n            image_type: 'photo',\n            orientation : 'horizontal',\n            safesearch : 'true',\n        });\n    \n        const url = `${BASE_URL}?${params}`;\n        const res = await axios.get(url);\n        return res.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery  = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',});\n\n    export function renderMarkup(data) {\n        const galleryMArkup = data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"item-image\">\n                <a class=\"photos-list-link\" href=\"${largeImageURL}\">             <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>             </a>             <ul class=\"photo-information-container\">                <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span>${likes}</p></li>\n                <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span>${views}</p></li>                <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span>${comments}</p></li>                 <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span>${downloads}</p></li>                </ul>                </li>`;\n            })  \n            .join(\"\");\n\n            gallery.insertAdjacentHTML  ('beforeend', galleryMArkup);\n\n            lightbox.refresh();\n    }","// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n// import { getImages} from './js/pixabay-api';\n// import { renderMarkup } from './js/render-functions';  \n\n// let query;\n// let page = 1;\n// let perPage = 15;\n// let maxPage = 0;\n// let currentPage = 1;\n// const btnLoadMore = document.querySelector(\".js-load-more\");\n// const gallery  = document.querySelector(\".gallery\");\n// const preloader = document.querySelector(\".loader\");\n// const form = document.querySelector(\".js-form\");\n\n// function showLoader() {\n//   preloader.classList.remove(\"is-hidden\")\n// };\n// function hideLoader() {\n// preloader.classList.add(\"is-hidden\")\n// };\n\n// function showLoadMore() {\n//   btnLoadMore.classList.remove(\"is-hidden\");\n// }\n// function hideLoadMore() {\n//   btnLoadMore.classList.add(\"is-hidden\");\n// }\n\n\n// form.addEventListener(\"submit\", validInput);\n\n// async function validInput(event) {\n\n//     event.preventDefault();\n\n//     gallery.innerHTML = \"\";\n\n//     query = event.target.elements.search.value.trim();\n\n//     showLoader();\n    \n//     if (query === \"\" ) {\n//         iziToast.warning({\n//             color: 'yellow',\n//             message: \"Please fill in the field for search!\",\n//             position: 'topRight'\n//         })\n//         return\n//     }\n//     await getImages(query)\n    \n//   try {\n//     const data = await getImages(query);\n//         if (data.hits.length === 0) {\n\n//             maxPage = Math.ceil(data.totalHits / perPage);\n//             iziToast.error({\n//                 message: \"Sorry, there are no images matching your search query. Please try again!\",\n//                 backgroundColor: \"red\",\n//                 messageColor: \"white\",\n//                 position: 'topRight'\n//             })\n//         }\n//         renderMarkup(data.hits)\n\n//         event.target.reset();\n//         return\n//     } catch {\n//         iziToast.error({\n//             title: 'Error',\n//             message: `Sorry, there are no images matching your search query. Please, try again!`,\n//             position: 'topRight'\n//         }\n//         )\n//             // .finally(() => hideLoader())\n//     }\n// }\n\n\n\n// btnLoadMore.addEventListener(\"click\", onLoadMore);\n\n// async function onLoadMore() {\n//   currentPage += 1;\n//   hideLoadMore();\n//   showLoader();\n//   try {\n//     const data = await getImages(query, currentPage); \n//     renderImages(data.hits);\n//   } catch (error) {\n//     iziToast.error({\n//     message: 'Sorry, an error occurred while loading. Please try again!',\n//     theme: 'dark',\n//     progressBarColor: '#FFFFFF',\n//     color: '#EF4040',\n//     position: 'topRight',\n//     });\n//   }\n//   hideLoader();\n//   myScroll();\n//   checkButtonStatus();\n// }\n\n\n// function checkButtonStatus() {\n//   if (currentPage >= maxPage) {\n//     hideLoadMore();\n//     iziToast.info({\n//       message: \"We're sorry, but you've reached the end of search results.\",\n//       theme: \"dark\",\n//       progressBarColor: \"#FFFFFF\",\n//       color: \"blue\",\n//       position: \"topRight\",\n//     });\n//   } else {\n//     showLoadMore();\n//   }\n// }\n\n// function myScroll() {\n//   const height = gallery.firstChild.getBoundingClientRect().height;\n\n//   scrollBy({\n//     top: height,\n//     behavior: 'smooth',\n//   });\n// }\n\n\n\n\n\n\n\n\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImages} from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\nlet query;\nlet page = 1;\nlet perPage = 15;\nlet maxPage = 0;\nlet currentPage = 1;\nconst gallery  = document.querySelector(\".gallery\");\nconst preloader = document.querySelector(\".loader\");\nconst form = document.querySelector(\".js-form\");\nconst btnLoadMore = document.querySelector(\".js-load-more\");\nfunction showLoader() {\n  preloader.classList.remove(\"is-hidden\")\n};\nfunction hideLoader() {\npreloader.classList.add(\"is-hidden\")\n};\nfunction showLoadMore() {\n  btnLoadMore.classList.remove(\"is-hidden\");\n}\nfunction hideLoadMore() {\n  btnLoadMore.classList.add(\"is-hidden\");\n}\nform.addEventListener(\"submit\", validInput);\n\nasync function validInput(event) {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    query = event.target.elements.search.value.trim();\n    showLoader();\n    if (query === \"\" ) {\n        iziToast.warning({\n            color: 'yellow',\n            message: \"Please fill in the field for search!\",\n            position: 'topRight'\n        })\n        return\n    }\n    await getImages(query)\n  try {\n    const data = await getImages(query, currentPage);\n    showLoadMore()\n        if (data.hits.length === 0) {\n            maxPage = Math.ceil(data.totalHits / perPage);\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                backgroundColor: \"red\",\n                messageColor: \"white\",\n                position: 'topRight'\n            })\n        }\n        renderMarkup(data.hits)\n        event.target.reset();\n        return\n    } catch {\n        iziToast.error({\n            title: 'Error',\n            message: `Sorry, there are no images matching your search query. Please, try again!`,\n            position: 'topRight'\n        }\n        ).finally(() => hideLoader())\n    }\n}\nbtnLoadMore.addEventListener(\"click\", onLoadMore);\nasync function onLoadMore() {\n  currentPage += 1;\n  hideLoadMore();\n  showLoader();\n  try {\n    const data = await getImages(query, currentPage);\n    renderImages(data.hits);\n  } catch (error) {\n    iziToast.error({\n    message: 'Sorry, an error occurred while loading. Please try again!',\n    theme: 'dark',\n    progressBarColor: '#FFFFFF',\n    color: '#EF4040',\n    position: 'topRight',\n    });\n  }\n  hideLoader();\n  myScroll();\n  checkButtonStatus();\n}\nfunction checkButtonStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      theme: \"dark\",\n      progressBarColor: \"#FFFFFF\",\n      color: \"blue\",\n      position: \"topRight\",\n    });\n  } else {\n    showLoadMore();\n  }\n}\nfunction myScroll() {\n  const height = gallery.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}"],"names":["getImages","query","BASE_URL","params","url","axios","gallery","lightbox","SimpleLightbox","renderMarkup","data","galleryMArkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","perPage","maxPage","currentPage","preloader","form","btnLoadMore","showLoader","hideLoader","showLoadMore","hideLoadMore","validInput","event","iziToast","onLoadMore","myScroll","checkButtonStatus","height"],"mappings":"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"}